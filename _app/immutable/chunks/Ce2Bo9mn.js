var H=Object.defineProperty;var w=t=>{throw TypeError(t)};var K=(t,e,a)=>e in t?H(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var B=(t,e,a)=>K(t,typeof e!="symbol"?e+"":e,a),Y=(t,e,a)=>e.has(t)||w("Cannot "+a);var r=(t,e,a)=>(Y(t,e,"read from private field"),a?a.call(t):e.get(t)),v=(t,e,a)=>e.has(t)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),F=(t,e,a,s)=>(Y(t,e,"write to private field"),s?s.call(t,a):e.set(t,a),a);import{V as U,W as V,X as O,Y as W,z as x,Z as C,h as D,G as X,_ as J,a0 as Q,A as ee,a as te,a1 as ae,a2 as se,a3 as re,a4 as ie,F as ne,E as $,a5 as z,L as fe,a6 as ue,a7 as ce,i as y,a8 as de,a9 as le,K as G,aa as oe,ab as he,ac as _e,ad as ve,ae as be,O as ge,af as Se,ag as pe,ah as me,ai as Ee,S as Ae,aj as Pe,k as Te,u as ye,ak as Ie,al as Re,am as Oe}from"./DqPoIbAy.js";var o,h,l,b,E,A,I;class De{constructor(e,a=!0){B(this,"anchor");v(this,o,new Map);v(this,h,new Map);v(this,l,new Map);v(this,b,new Set);v(this,E,!0);v(this,A,()=>{var e=U;if(r(this,o).has(e)){var a=r(this,o).get(e),s=r(this,h).get(a);if(s)V(s),r(this,b).delete(a);else{var n=r(this,l).get(a);n&&(r(this,h).set(a,n.effect),r(this,l).delete(a),n.fragment.lastChild.remove(),this.anchor.before(n.fragment),s=n.effect)}for(const[i,u]of r(this,o)){if(r(this,o).delete(i),i===e)break;const f=r(this,l).get(u);f&&(O(f.effect),r(this,l).delete(u))}for(const[i,u]of r(this,h)){if(i===a||r(this,b).has(i))continue;const f=()=>{if(Array.from(r(this,o).values()).includes(i)){var _=document.createDocumentFragment();J(u,_),_.append(x()),r(this,l).set(i,{effect:u,fragment:_})}else O(u);r(this,b).delete(i),r(this,h).delete(i)};r(this,E)||!s?(r(this,b).add(i),W(u,f,!1)):f()}}});v(this,I,e=>{r(this,o).delete(e);const a=Array.from(r(this,o).values());for(const[s,n]of r(this,l))a.includes(s)||(O(n.effect),r(this,l).delete(s))});this.anchor=e,F(this,E,a)}ensure(e,a){var s=U,n=Q();if(a&&!r(this,h).has(e)&&!r(this,l).has(e))if(n){var i=document.createDocumentFragment(),u=x();i.append(u),r(this,l).set(e,{effect:C(()=>a(u)),fragment:i})}else r(this,h).set(e,C(()=>a(this.anchor)));if(r(this,o).set(s,e),n){for(const[f,c]of r(this,h))f===e?s.skipped_effects.delete(c):s.skipped_effects.add(c);for(const[f,c]of r(this,l))f===e?s.skipped_effects.delete(c.effect):s.skipped_effects.add(c.effect);s.oncommit(r(this,A)),s.ondiscard(r(this,I))}else D&&(this.anchor=X),r(this,A).call(this)}}o=new WeakMap,h=new WeakMap,l=new WeakMap,b=new WeakMap,E=new WeakMap,A=new WeakMap,I=new WeakMap;function ke(t,e,a=!1){D&&te();var s=new De(t),n=a?ae:0;function i(u,f){if(D){const _=se(t)===re;if(u===_){var c=ie();ne(c),s.anchor=c,$(!1),s.ensure(u,f),$(!0);return}}s.ensure(u,f)}ee(()=>{var u=!1;e((f,c=!0)=>{u=!0,i(c,f)}),u||i(!1,null)},n)}let T=!1,L=Symbol();function we(t,e,a){const s=a[e]??(a[e]={store:null,source:fe(void 0),unsubscribe:z});if(s.store!==t&&!(L in a))if(s.unsubscribe(),s.store=t??null,t==null)s.source.v=void 0,s.unsubscribe=z;else{var n=!0;s.unsubscribe=ue(t,i=>{n?s.source.v=i:G(s.source,i)}),n=!1}return t&&L in a?ce(t):y(s.source)}function Be(){const t={};function e(){de(()=>{for(var a in t)t[a].unsubscribe();le(t,L,{enumerable:!1,value:!0})})}return[t,e]}function Le(t){var e=T;try{return T=!1,[t(),T]}finally{T=e}}function Ye(t,e,a,s){var N;var n=!Se||(a&pe)!==0,i=(a&me)!==0,u=(a&Oe)!==0,f=s,c=!0,_=()=>(c&&(c=!1,f=u?ye(s):s),f),S;if(i){var Z=Ae in t||Pe in t;S=((N=oe(t,e))==null?void 0:N.set)??(Z&&e in t?d=>t[e]=d:void 0)}var p,M=!1;i?[p,M]=Le(()=>t[e]):p=t[e],p===void 0&&s!==void 0&&(p=_(),S&&(n&&Ie(),S(p)));var g;if(n?g=()=>{var d=t[e];return d===void 0?_():(c=!0,d)}:g=()=>{var d=t[e];return d!==void 0&&(f=void 0),d===void 0?f:d},n&&(a&he)===0)return g;if(S){var j=t.$$legacy;return(function(d,P){return arguments.length>0?((!n||!P||j||M)&&S(P?g():d),d):g()})}var R=!1,m=((a&Re)!==0?Te:ge)(()=>(R=!1,g()));i&&y(m);var q=ve;return(function(d,P){if(arguments.length>0){const k=P?y(m):n&&i?_e(d):d;return G(m,k),R=!0,f!==void 0&&(f=k),d}return Ee&&R||(q.f&be)!==0?m.v:y(m)})}export{De as B,Be as a,ke as i,Ye as p,we as s};
